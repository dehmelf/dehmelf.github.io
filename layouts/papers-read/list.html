{{- define "main" }}

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">
      {{ .Title }}
    </h1>
    {{- if .Description }}
    <div class="post-description">
      {{ .Description }}
    </div>
    {{- end }}
  </header>
  
  <div class="post-content">
    {{- .Content }}
    
    {{- $pages := where .Site.RegularPages "Section" "papers-read" }}
    {{- $pages = where $pages "Params.draft" "!=" true }}
    {{- $pages = $pages.ByParam "weight" }}
    
    <div class="papers-list">
    {{- range $pages }}
      <div class="paper-entry" data-tags="{{ delimit .Params.tags "," | urlize }}" style="margin-bottom: 30px; padding: 20px; background: var(--code-bg); border-radius: 8px;">
        <h3 style="margin-top: 0;">
          <a href="{{ .RelPermalink }}" style="color: var(--primary);">{{ .Title }}</a>
        </h3>
        
        {{- if .Params.author }}
        <div style="color: var(--secondary); margin-bottom: 10px;">
          <strong>Authors:</strong> {{ .Params.author }}
        </div>
        {{- end }}
        
        {{- if .Params.tags }}
        <div class="paper-tags" style="margin-bottom: 10px;">
          {{- range .Params.tags }}
          <span style="
            display: inline-block;
            padding: 4px 10px;
            margin-right: 8px;
            margin-bottom: 5px;
            background: var(--tertiary);
            border-radius: 12px;
            font-size: 12px;
            color: var(--primary);
          ">{{ . }}</span>
          {{- end }}
        </div>
        {{- end }}
        
        {{- if .Description }}
        <div style="color: var(--secondary); font-style: italic;">
          {{ .Description }}
        </div>
        {{- end }}
        
        <div style="margin-top: 10px;">
          <a href="{{ .RelPermalink }}" style="color: var(--primary); text-decoration: underline;">Read my notes â†’</a>
        </div>
      </div>
    {{- end }}
    </div>
  </div>
</article>

{{- end }}{{/* end main */}}
